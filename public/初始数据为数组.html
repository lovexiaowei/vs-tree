<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>vs-tree2.0_初始数据为数组</title>
<!--  <link rel="stylesheet" href="../dist/vs-tree.css">-->
  <script src="../dist/vs-tree.js"></script>
  <link rel="stylesheet" href="../dist/vs-tree.css">
</head>

<body>
  <p>原始数据为数组时，自动为数据包裹一层根节点,如果不设置rootName则<mark>showRoot</mark>默认设置为<mark>false</mark></p>
  <button id="checked" type="button">获取选中元素</button>
  <div id="tree"></div>

  <script>
    var id = 1;
    function add(parentId, name) {
      const list = []
      for (var i = 0; i < 2; i++) {
        list.push({ id: 's' + id++, name: name+i, parentId: parentId })
      }
      return list
    }
    let cc=add('100', 'wangwu');
    cc[0].children=add(cc[0].id,'666');
    const data = [
      { id: '100', name: 'wangwu', parentId: '1', children: cc},
      { id: '101', name: 'zhaoliu', parentId: '1', children: add('101', 'zhaoliu') },
      { id: '102', name: 'huahua', parentId: '1',  children: add('102', 'CC')},
      { id: '103', name: 'oo-1', parentId: '1' },
      { id: '104', name: 'oo-2', parentId: '1' },
      // { id: '105', name: 'oo-3', parentId: '1' },
      // { id: '106', name: 'oo-4', parentId: '1' },
      // { id: '107', name: 'oo-5', parentId: '1' },
      // { id: '108', name: 'oo-6', parentId: '1' },
      // { id: '109', name: 'oo-7', parentId: '1' },
      // { id: '110', name: 'oo-8', parentId: '1' },
      // { id: '111', name: 'oo-9', parentId: '1' },
    ]
    // console.timeEnd('create:data')
    // console.time('render:tree');
    const tree = new vsTree.default('#tree', {
      data: data,
      // maxHeight:200,
      showCheckbox: true,
      draggable:true,
      showIcon:true,
      indent:30,
      dropable:true,
      canDrop:(a)=>{
          // return false;
      },
      onDrop:(a,b,c)=>{
        // console.log(a,b,c);
      },
      format:function (data){
        var a=new Image(20,20);
        a.src='http://mytest15.com/upload/columnthumbnail/20180328/5abb657fa458f.png';
        data.icon=a;
        return data;
      }
      // rootName: '根节点'
    });
    // console.timeEnd('render:tree');
    document.getElementById("checked").onclick = function () {
      // console.log(tree);
      console.log(tree.getCheckedNodes());
    }

    var tt={ id: '108', name: 'oo-2', parentId: '1',checked:true };
    var a=tree.getNodeById('102');
    var b=tree.getNodeById('1001001');
  </script>
</body>

</html>
